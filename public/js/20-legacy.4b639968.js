"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[20],{1020:function(t,a,i){i.r(a),i.d(a,{default:function(){return l}});var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"d-flex flex-column align-items-center",attrs:{id:"citas"}},[i("br"),i("h1",{staticClass:"my-5"},[t._v("Citas 📝")]),i("div",{staticClass:"d-flex align-items-center m-2",attrs:{id:"select"}},[i("label",{attrs:{for:"filtro"}},[t._v(" Filtrar busqueda ")]),i("select",{staticClass:"form-control",attrs:{name:"filtro",id:"enlace"},on:{change:t.cambiarEnlace}},[i("option",{attrs:{value:""}},[t._v("Todas")]),i("option",{attrs:{value:"proximo"}},[t._v("Proximas")]),i("option",{attrs:{value:"antigua"}},[t._v("Citas antiguas")]),i("option",{attrs:{value:"nueva"}},[t._v("Citas nuevas")])])]),i("paginate",{ref:"paginator",attrs:{name:"citas",list:t.citas,per:10}},[i("div",{staticClass:"accordion",attrs:{role:"tablist"}},t._l(t.paginated("citas"),(function(a,e){return i("b-card",{key:e,staticClass:"mb-1 mx-5",attrs:{"no-body":""}},[i("b-card-header",{attrs:{"header-tag":"header",role:"tab"}},[i("div",{staticClass:"d-flex flex-wrap align-items-center justify-content-around"},[i("div",{staticClass:"boton"},[i("p",[t._v("#")]),i("p",{staticClass:"TextoACopiar d-none"},[t._v(" "+t._s(a._id)+" ")]),i("button",{staticClass:"btn btn-primary",attrs:{id:"BotonCopiar",title:"copiar id"},on:{click:function(a){return t.copiar()}}},[i("svg",{staticClass:"bi bi-clipboard",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[i("path",{attrs:{d:"M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"}}),i("path",{attrs:{d:"M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"}})])])]),i("div",{staticClass:"boton",staticStyle:{"min-width":"90px"}},[i("p",[t._v("Fecha")]),i("p",[t._v(t._s(a.fechaCita.substring(0,10)))])]),i("div",{staticClass:"boton"},[i("p",[t._v("Autorizado")]),1==a.autorizado?i("p",[t._v("✅")]):i("p",[t._v("❔")])]),i("div",{staticClass:"boton mx-3"},[i("p",[t._v("€")]),i("p",[t._v(t._s(a.precio))])]),i("div",{staticClass:"boton"},[i("p",[i("svg",{staticClass:"bi bi-three-dots",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[i("path",{attrs:{d:"M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"}})])]),i("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"accordion-"+e,expression:"'accordion-' + index"}]},[i("svg",{staticClass:"bi bi-info-circle-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[i("path",{attrs:{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"}})])])],1)])]),i("b-collapse",{attrs:{id:"accordion-"+e,accordion:"my-accordion",role:"tabpanel"}},[i("b-card-body",[i("b-card-text",[i("div",{staticClass:"abajo d-flex flex-wrap"},[i("div",{staticClass:"boton"},[i("p",[t._v("Autor")]),i("button",{staticClass:"btn btn-success",on:{click:function(i){return t.perfil(a.tatuador)}}},[t._v(" 👨‍🎨 ")])]),i("div",{staticClass:"boton"},[i("p",[t._v("Cliente")]),i("button",{staticClass:"btn btn-success",on:{click:function(i){return t.perfil(a.cliente)}}},[t._v(" 🙎‍♂️ ")])]),i("div",{staticClass:"boton"},[i("p",[t._v("Tatuaje")]),i("button",{staticClass:"btn btn-primary",on:{click:function(i){return t.tatuajeE(a.tatuaje)}}},[t._v(" 🎨 ")])]),i("div",{staticClass:"boton"},[i("p",[t._v("Acciones")]),i("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Basic example"}},[i("button",{staticClass:"btn btn-warning",attrs:{title:"edit"},on:{click:function(i){return t.editarCita(a._id)}}},[t._v(" 🛠 ")]),i("button",{staticClass:"btn btn-danger",attrs:{title:"delete"},on:{click:function(i){return t.showMsgBox(a._id)}}},[t._v(" 💥 ")])])])])])],1)],1)],1)})),1)]),i("div",{staticClass:"container"},[i("b-alert",{attrs:{show:t.dismissCountDown,variant:t.mensaje.color},on:{dismissed:function(a){t.dismissCountDown=0},"dismiss-count-down":t.countDownChanged}},[i("p",[t._v(t._s(t.mensaje.texto))]),i("b-progress",{attrs:{variant:t.mensaje.color,max:t.dismissSecs,value:t.dismissCountDown,height:"4px"}})],1)],1),t.citas.length>10?i("paginate-links",{attrs:{for:"citas","show-step-links":!0,simple:{prev:"◀",next:"▶"}}}):t._e()],1)},s=[],n=(i(4916),i(3123),i(2707),i(1539),i(4747),i(9826),i(4553),i(561),{data:function(){return{box:"",paginate:["citas"],citas:[],dismissSecs:5,dismissCountDown:0,showDismissibleAlert:!1,mensaje:{color:"",texto:""},cita:{tatuador:"",cliente:"",fechaCita:"",precio:"",autorizado:Boolean,tatuaje:""},orden:""}},beforeCreate:function(){"true"!=localStorage.getItem("tatuador")&&this.$router.go(-1)},created:function(){this.orden=window.location.href.split("?or=")[1],this.listarCitas()},mounted:function(){this.insertarOpciones(this.orden)},methods:{alerta:function(){this.mensaje.color="warning",this.mensaje.texto="Cita eliminada 💥",this.showAlert()},alertaCopia:function(){this.mensaje.color="primary",this.mensaje.texto="Cita copiada",this.showAlert()},perfil:function(t){window.location.href="/usuario?id="+t},tatuajeE:function(t){window.location.href="/tatuaje?id="+t},listarCitas:function(){var t=this;this.axios.get("/citas/listar").then((function(a){var i=a.data;if("proximo"==t.orden){var e=new Date(Date.now()).getTime();i.sort((function(t,a){return new Date(t.fechaCita).getTime()-new Date(a.fechaCita).getTime()})),i.forEach((function(a){var i=new Date(a.fechaCita).getTime();e<i&&t.citas.push(a)}))}else"nueva"==t.orden?(i.sort((function(t,a){return new Date(t.fechaCita).getTime()-new Date(a.fechaCita).getTime()})),i.reverse(),t.citas=i):"antigua"==t.orden?(i.sort((function(t,a){return new Date(t.fechaCita).getTime()-new Date(a.fechaCita).getTime()})),t.citas=i):t.citas=i})).catch((function(t){console.log(t.response)}))},cambiarEnlace:function(t){var a=t.target.value;window.location.href=""!=a?"/citas?or="+a:"/citas"},insertarOpciones:function(t){var a=document.getElementById("enlace");a.value=void 0!=t?t:""},editarCita:function(t){window.location.href="/cita/actualizar?id="+t},eliminarCita:function(t){var a=this;this.citas.find((function(a){return a._id===t}));this.axios.delete("/citas/borrar/"+t).then((function(t){var i=a.citas.findIndex((function(a){return a._id===t.data._id}));a.citas.splice(i,1),a.alerta()}))},countDownChanged:function(t){this.dismissCountDown=t},showAlert:function(){this.dismissCountDown=this.dismissSecs},showMsgBox:function(t){var a=this;this.boxTwo="",this.$bvModal.msgBoxConfirm("¿Quieres eliminarlo?",{title:"Por favor, confirme",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"ELIMINAR",cancelTitle:"CANCELAR",footerClass:"p-2",hideHeaderClose:!1,backgroundColor:"success",centered:!0}).then((function(i){a.box=i,1==a.box&&a.eliminarCita(t)})).catch((function(t){console.log(t)}))},copiar:function(){var t=document.querySelector(".TextoACopiar").textContent,a=document.createElement("input");a.value=t,document.body.appendChild(a),a.select(),document.execCommand("copy"),a.remove(),this.alertaCopia()}}}),o=n,r=i(1001),c=(0,r.Z)(o,e,s,!1,null,null,null),l=c.exports}}]);
//# sourceMappingURL=20-legacy.4b639968.js.map