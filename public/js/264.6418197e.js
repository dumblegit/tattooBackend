"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[264],{5264:function(s,t,o){o.r(t),o.d(t,{default:function(){return l}});var a=function(){var s=this,t=s.$createElement,o=s._self._c||t;return o("div",{staticClass:"d-flex flex-column align-items-center"},[o("h1",{staticClass:"my-5"},[s._v("Iniciar sesi칩n")]),o("form",{staticClass:"d-flex flex-column",on:{submit:function(t){return t.preventDefault(),s.comprobarCrecenciales()}}},[o("div",{},[o("div",{staticClass:"px-5 py-3",attrs:{id:"form"}},[s._v(" Usuario "),o("input",{directives:[{name:"model",rawName:"v-model",value:s.usuario.usuario,expression:"usuario.usuario"}],staticClass:"form-control my-2",attrs:{type:"text",placeholder:"Usuario",required:""},domProps:{value:s.usuario.usuario},on:{input:function(t){t.target.composing||s.$set(s.usuario,"usuario",t.target.value)}}}),s._v(" Contrase침a "),o("input",{directives:[{name:"model",rawName:"v-model",value:s.usuario.password,expression:"usuario.password"}],staticClass:"form-control my-2",attrs:{type:"password",placeholder:"Contrase침a",required:""},domProps:{value:s.usuario.password},on:{input:function(t){t.target.composing||s.$set(s.usuario,"password",t.target.value)}}})]),o("b-button",{staticClass:"my-4 w-100",attrs:{id:"enviar",pill:"",type:"submit"}},[s._v(" Iniciar ")])],1)]),o("div",{staticClass:"container"},[o("b-alert",{attrs:{show:s.dismissCountDown,variant:s.mensaje.color},on:{dismissed:function(t){s.dismissCountDown=0},"dismiss-count-down":s.countDownChanged}},[o("p",[s._v(s._s(s.mensaje.texto))]),o("b-progress",{attrs:{variant:s.mensaje.color,max:s.dismissSecs,value:s.dismissCountDown,height:"4px"}})],1)],1)])},e=[],i=(o(2851),{data(){return{dismissSecs:5,dismissCountDown:0,showDismissibleAlert:!1,mensaje:{color:"",texto:""},usuario:{usuario:"",password:""}}},created(){null!=localStorage.getItem("id")&&this.$router.go(-1)},methods:{alertaUsuario(){this.mensaje.color="warning",this.mensaje.texto="El usuario introducido no existe",this.showAlert()},alertaPass(){this.mensaje.color="warning",this.mensaje.texto="La contrase침a y usuario son incorrectos",this.showAlert()},comprobarCrecenciales(){this.axios.post("/usuarios/comprobarUsuario",this.usuario).then((s=>{s.data.existe?this.axios.post("/usuarios/inicioSesion",this.usuario).then((s=>{s.data.inicioFallido?this.alertaPass():(localStorage.setItem("id",s.data.id),localStorage.setItem("nombre",s.data.nombre),localStorage.setItem("usuario",s.data.usuario),localStorage.setItem("tatuador",s.data.tatuador),location.reload())})).catch((s=>{console.log(s)})):this.alertaUsuario()})).catch((s=>{console.log(s)}))},countDownChanged(s){this.dismissCountDown=s,"success"==this.mensaje.color&&setTimeout((()=>{this.$router.go(-1)}),500)},showAlert(){this.dismissCountDown=this.dismissSecs}},mounted(){document.querySelector("#form > input:nth-child(1)").focus()}}),r=i,n=o(1001),u=(0,n.Z)(r,a,e,!1,null,null,null),l=u.exports}}]);
//# sourceMappingURL=264.6418197e.js.map