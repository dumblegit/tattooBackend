"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[279],{9279:function(t,a,s){s.r(a),s.d(a,{default:function(){return l}});var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"d-flex flex-column align-items-center"},[s("br"),s("h1",{staticClass:"my-5"},[t._v("Te damos la Bienvenida ðŸ‘‹")]),s("form",{staticClass:"d-flex flex-column",attrs:{enctype:"multipart/form-data"},on:{submit:function(a){return a.preventDefault(),t.agregarUsuario()}}},[s("div",{staticClass:"container px-5 pb-3",attrs:{id:"form"}},[s("h3",{staticClass:"mt-3"},[t._v("Nuevo usuario")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.usuario.nombre,expression:"usuario.nombre"}],staticClass:"form-control my-2",attrs:{type:"text",placeholder:"Nombre",required:""},domProps:{value:t.usuario.nombre},on:{input:function(a){a.target.composing||t.$set(t.usuario,"nombre",a.target.value)}}}),s("div",{staticClass:"d-flex"},[s("label",{attrs:{for:"date"}},[t._v("Fecha de nacimiento:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.usuario.fechaNacimiento,expression:"usuario.fechaNacimiento"}],staticClass:"form-control my-2",attrs:{type:"date",id:"date",required:""},domProps:{value:t.usuario.fechaNacimiento},on:{input:function(a){a.target.composing||t.$set(t.usuario,"fechaNacimiento",a.target.value)}}})]),s("div",{staticClass:"d-flex align-items-center"},[t._v(" Foto de perfil: "),s("input",{staticClass:"form-control m-2",attrs:{id:"fotoPerfil",type:"file"},on:{change:t.agregarFile}})]),s("div",{staticClass:"input-group mb-2"},[t._m(0),s("input",{directives:[{name:"model",rawName:"v-model",value:t.usuario.usuario,expression:"usuario.usuario"}],staticClass:"form-control my-2",attrs:{type:"text",id:"inlineFormInputGroup",placeholder:"Username",required:""},domProps:{value:t.usuario.usuario},on:{input:function(a){a.target.composing||t.$set(t.usuario,"usuario",a.target.value)}}})]),s("div",[s("b-form",{on:{submit:function(t){t.stopPropagation(),t.preventDefault()}}},[s("b-form-input",{attrs:{type:"password",placeholder:"ContraseÃ±a",state:t.validation,id:"feedback-user"},model:{value:t.usuario.password,callback:function(a){t.$set(t.usuario,"password",a)},expression:"usuario.password"}}),s("b-form-invalid-feedback",{attrs:{state:t.validation}},[t._v(" Debe tener entre 8 y 16 caracteres, al menos un dÃ­gito, al menos una minÃºscula y al menos una mayÃºscula. ")]),s("b-form-valid-feedback",{attrs:{state:t.validation}},[t._v(" ok. ")])],1)],1)]),s("b-button",{staticClass:"my-4",attrs:{id:"enviar",pill:"",type:"submit"}},[t._v("Enviar")])],1),s("div",{staticClass:"container"},[s("b-alert",{attrs:{show:t.dismissCountDown,variant:t.mensaje.color},on:{dismissed:function(a){t.dismissCountDown=0},"dismiss-count-down":t.countDownChanged}},[s("p",[t._v(t._s(t.mensaje.texto))]),s("b-progress",{attrs:{variant:t.mensaje.color,max:t.dismissSecs,value:t.dismissCountDown,height:"4px"}})],1)],1)])},i=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"input-group-prepend"},[s("div",{staticClass:"input-group-text my-2"},[t._v("@")])])}],o={data(){return{usuarios:[],dismissSecs:5,dismissCountDown:0,showDismissibleAlert:!1,mensaje:{color:"",texto:""},usuario:{nombre:"",tatuador:Boolean,fechaNacimiento:null,fotoPerfil:"",usuario:"",password:"",aboutYou:""},valida:""}},beforeCreate(){null!=localStorage.getItem("id")&&this.$router.go(-1)},computed:{validation(){var t=/^(?=\w*\d)(?=\w*[A-Z])(?=\w*[a-z])\S{8,16}$/;return t.test(this.usuario.password)?this.valida=!0:this.valida=!1,t.test(this.usuario.password)}},methods:{alertaTrue(){this.mensaje.color="success",this.mensaje.texto="Usuario agregado con exito! ðŸ‘Œ",this.showAlert()},alertaFalse(){this.mensaje.color="warning",this.mensaje.texto="Error :(",this.showAlert()},alertaUsuarioExistente(){alert("Nombre de usuario ya existente")},agregarUsuario(){this.axios.post("/usuarios/comprobarUsuario",this.usuario).then((t=>{if(0==t.data.existe)if(1==this.valida){const t=new FormData;t.append("fotoPerfil",this.usuario.fotoPerfil),this.axios.post("/usuarios/agregarFoto",t).then((t=>{this.usuarios.push(t.data),this.usuario.fotoPerfil=t.data,this.alertaTrue()})).catch((t=>{this.alertaFalse()})).finally((t=>{this.axios.post("/usuarios/agregar",this.usuario).then((t=>{this.usuarios.push(t.data),this.alertaTrue()})).catch((t=>{this.alertaFalse()})).finally((t=>{this.usuario.nombre="",this.usuario.tatuador=!1,this.usuario.fotoPerfil="",this.usuario.fechaNacimiento=new Date,this.usuario.usuario="",this.usuario.password=""}))}))}else this.alertaFalse;else this.alertaUsuarioExistente()}))},agregarFile(t){var a=t.target.files[0];const s=["image/jpg","image/jpeg","image/png"];s.includes(a.type)&&(this.usuario.fotoPerfil=a)},countDownChanged(t){this.dismissCountDown=t,"success"==this.mensaje.color&&setTimeout((()=>{window.location.href="/"}),5e3)},showAlert(){this.dismissCountDown=this.dismissSecs}}},r=o,u=s(1001),n=(0,u.Z)(r,e,i,!1,null,null,null),l=n.exports}}]);
//# sourceMappingURL=279.8deb3c61.js.map