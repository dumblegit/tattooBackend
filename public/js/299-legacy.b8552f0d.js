"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[299],{9299:function(t,a,e){e.r(a),e.d(a,{default:function(){return l}});var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"d-flex flex-column align-items-center"},[e("br"),e("h1",{staticClass:"my-5"},[t._v("Edición de cita 🛠")]),e("form",{staticClass:"d-flex flex-column align-items-center",on:{submit:function(a){return a.preventDefault(),t.pedirCita(t.cita)}}},[e("div",{staticClass:"container px-5 pb-3",attrs:{id:"form"}},[e("h3",{staticClass:"mt-3"},[t._v("Cita 📝")]),e("div",{staticClass:"d-flex align-items-center"},[e("label",{staticClass:"mx-2",attrs:{for:"autor"}},[t._v("Tatuador")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.cita.tatuador,expression:"cita.tatuador"}],staticClass:"form-control",attrs:{name:"autor",id:"autor"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.cita,"tatuador",a.target.multiple?e:e[0])}}})]),e("div",{staticClass:"d-flex align-items-center"},[e("label",{staticClass:"m-2",attrs:{for:"date"}},[t._v("Fecha")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.cita.fechaCita,expression:"cita.fechaCita"}],staticClass:"form-control my-2",attrs:{type:"date",id:"date",required:""},domProps:{value:t.cita.fechaCita},on:{input:function(a){a.target.composing||t.$set(t.cita,"fechaCita",a.target.value)}}})]),e("div",{staticClass:"input-group mb-2 d-flex align-items-center"},[e("label",{staticClass:"m-2",attrs:{for:"inlineFormInputGroup"}},[t._v("Cliente")]),t._m(0),e("input",{directives:[{name:"model",rawName:"v-model",value:t.cita.cliente,expression:"cita.cliente"}],staticClass:"form-control my-2",attrs:{type:"text",id:"inlineFormInputGroup",placeholder:"Cliente",required:""},domProps:{value:t.cita.cliente},on:{input:function(a){a.target.composing||t.$set(t.cita,"cliente",a.target.value)}}})]),e("div",{staticClass:"d-flex align-items-center"},[e("label",{staticClass:"mx-2",attrs:{for:"tatuaje"}},[t._v("Tatuaje")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.cita.tatuaje,expression:"cita.tatuaje"}],staticClass:"form-control my-2",attrs:{name:"tatuaje",type:"text",placeholder:"Tatuaje",required:""},domProps:{value:t.cita.tatuaje},on:{input:function(a){a.target.composing||t.$set(t.cita,"tatuaje",a.target.value)}}})]),e("div",{staticClass:"input-group mb-2 d-flex flex-column align-items-center"},[e("div",{staticClass:"d-flex align-items-center"},[e("label",{staticClass:"m-2",attrs:{for:"autorizacion"}},[t._v("¿Autorizado?")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.cita.autorizado,expression:"cita.autorizado"}],staticClass:"m-2",attrs:{type:"checkbox",id:"autorizacion",placeholder:"Username"},domProps:{checked:Array.isArray(t.cita.autorizado)?t._i(t.cita.autorizado,null)>-1:t.cita.autorizado},on:{change:function(a){var e=t.cita.autorizado,i=a.target,s=!!i.checked;if(Array.isArray(e)){var o=null,n=t._i(e,o);i.checked?n<0&&t.$set(t.cita,"autorizado",e.concat([o])):n>-1&&t.$set(t.cita,"autorizado",e.slice(0,n).concat(e.slice(n+1)))}else t.$set(t.cita,"autorizado",s)}}}),t.cita.autorizado?e("div",[t._v("Sí")]):e("div",[t._v("No")])]),e("div",{staticClass:"input-group d-flex align-items-center"},[t._m(1),e("input",{directives:[{name:"model",rawName:"v-model",value:t.cita.precio,expression:"cita.precio"}],staticClass:"form-control my-2",attrs:{type:"text",id:"inlineFormInputGroup",placeholder:"Precio",required:""},domProps:{value:t.cita.precio},on:{input:function(a){a.target.composing||t.$set(t.cita,"precio",a.target.value)}}})])])]),e("b-button",{staticClass:"my-4 d-block w-100",attrs:{id:"enviar",pill:"",type:"submit"}},[t._v(" Editar ")])],1),e("div",{staticClass:"container"},[e("b-alert",{attrs:{show:t.dismissCountDown,variant:t.mensaje.color},on:{dismissed:function(a){t.dismissCountDown=0},"dismiss-count-down":t.countDownChanged}},[e("p",[t._v(t._s(t.mensaje.texto))]),e("b-progress",{attrs:{variant:t.mensaje.color,max:t.dismissSecs,value:t.dismissCountDown,height:"4px"}})],1)],1)])},s=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text my-2",attrs:{id:"apend"}},[t._v("@")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text",attrs:{id:"apend"}},[t._v("€")])])}],o=(e(4916),e(3123),{data:function(){return{citas:[],dismissSecs:5,dismissCountDown:0,showDismissibleAlert:!1,mensaje:{color:"",texto:""},cita:{tatuador:"",cliente:"",fechaCita:"",precio:"",autorizado:Boolean,tatuaje:""},autores:[]}},created:function(){var t=this;if("true"!=localStorage.getItem("tatuador")||void 0==location.href.split("?id=")[1])this.$router.go(-1);else{var a=location.href.split("?id=")[1];this.axios.get("citas/listar/"+a).then((function(a){t.cita=a.data,t.cita.fechaCita=a.data.fechaCita.substring(0,10)})).catch((function(t){console.log(t.response)}))}},mounted:function(){var t=this;this.axios.get("/usuarios/tatuadores").then((function(a){t.autores=a.data,t.insertarTatuadores(t.autores)})).catch((function(t){console.log(t)}))},methods:{alertaTrue:function(){this.mensaje.color="primary",this.mensaje.texto="Cita editada con exito! 👌",this.showAlert()},alertaFalse:function(){this.mensaje.color="warning",this.mensaje.texto="Error :(",this.showAlert()},pedirCita:function(t){var a=this;this.axios.put("citas/actualizar/"+t._id,t).then((function(t){a.cita.tatuador=t.data.tatuador,a.cita.cliente=t.data.cliente,a.cita.fechaCita=t.data.fechaCita,a.cita.precio=t.data.precio,a.cita.autorizado=t.data.autorizado,a.cita.tatuaje=t.data.tatuaje,a.alertaTrue()})).catch((function(t){console.log(t)}))},insertarTatuadores:function(t){var a=document.getElementById("autor"),e=document.createElement("option");e.value="",e.innerHTML="Desconocido",a.appendChild(e);for(var i=0;i<t.length;i++)e=document.createElement("option"),e.value=t[i]._id,e.innerHTML=t[i].nombre,t[i]._id==this.cita.tatuador&&e.setAttribute("selected",""),a.appendChild(e)},countDownChanged:function(t){this.dismissCountDown=t,"primary"==this.mensaje.color&&setTimeout((function(){window.location.href="/citas"}),5e3)},showAlert:function(){this.dismissCountDown=this.dismissSecs}}}),n=o,r=e(1001),c=(0,r.Z)(n,i,s,!1,null,null,null),l=c.exports}}]);
//# sourceMappingURL=299-legacy.b8552f0d.js.map