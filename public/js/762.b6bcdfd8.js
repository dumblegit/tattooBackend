"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[762],{5762:function(t,e,i){i.r(e),i.d(e,{default:function(){return p}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"Usuario"}},[i("br"),i("b-col",{staticClass:"m-auto",attrs:{cols:"12",md:"9",lg:"8",xl:"7"}},[i("UserCard")],1)],1)},a=[],o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"c m-2 p-2 d-md-flex justify-content-between align-items-center"},[i("img",{staticClass:"c-img rounded-circle",attrs:{id:"imagenFotoPerfil",src:t.src+t.usuario.fotoPerfil,alt:"User Image"}}),i("div",{staticClass:"c-body m-5 d-flex flex-column align-items-md-end"},[i("h5",{staticClass:"c-title",attrs:{id:"name"}},[t._v(t._s(t.usuario.nombre))]),i("div",{staticClass:"c-text"},[i("p",[t._v("@"+t._s(t.usuario.usuario))]),i("br"),1==t.usuario.tatuador?i("span",{staticClass:"my-3"},[t._v("tattooer üë®‚Äçüé®")]):i("span",{staticClass:"my-3"},[t._v("tattooed üôç‚Äç‚ôÇÔ∏è")])]),""==t.usuario.aboutYou&&t.accion?i("p",{staticClass:"delete",attrs:{title:"edit"},on:{click:function(e){return t.editAboutYou()}}},[t._v(" Cuenta algo sobre ti! ")]):t.accion?i("p",{staticClass:"editable",attrs:{title:"edit"},on:{click:function(e){return t.editAboutYou()}}},[t._v(" "+t._s(t.usuario.aboutYou)+" ")]):i("p",[t._v(" "+t._s(t.usuario.aboutYou)+" ")]),i("form",{attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.actualizarUsuario(t.usuario)}}},[i("div",{staticClass:"ok"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.usuario.aboutYou,expression:"usuario.aboutYou"}],staticClass:"edit form-control m-2",attrs:{type:"text",hidden:""},domProps:{value:t.usuario.aboutYou},on:{keyup:t.cuentaLetras,input:function(e){e.target.composing||t.$set(t.usuario,"aboutYou",e.target.value)}}}),i("button",{staticClass:"ok btn btn-outline-success mb-2",attrs:{type:"submit",hidden:""},on:{click:function(e){return t.hidden()}}},[t._v(" edit "+t._s(t.cont)+"/200 ")])])]),i("div",{staticClass:"d-flex align-items-center justify-content-center"},[t.accion?i("button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"desplegable",expression:"'desplegable'"}],staticClass:"btn btn-primary p-0 px-3",attrs:{id:"citas",type:"button"}},[t._v(" Citas "),i("span",{staticClass:"badge badge-light"},[t._v(t._s(t.citas.length))])]):t._e(),t.accion?i("b-dropdown",{staticClass:"m-2",attrs:{text:"üõ†",variant:"warning"}},[i("b-dropdown-item",[i("p",{attrs:{title:"edit"},on:{click:function(e){return t.editAboutYou()}}},[t._v(" üí¨ Editar bio ")])]),i("b-dropdown-item",[i("p",{attrs:{title:"edit"},on:{click:function(e){return t.editarUsuario(t.usuario._id)}}},[t._v(" üôç‚Äç‚ôÇÔ∏è Editar usuario ")])]),i("b-dropdown-item",[i("p",{attrs:{title:"delete"},on:{click:function(e){return t.eliminarUsuario(t.usuario._id)}}},[t._v(" üí• Eliminar usuario ")])])],1):t._e()],1)])]),i("div",{staticClass:"container"},[i("b-alert",{attrs:{show:t.dismissCountDown,variant:t.mensaje.color},on:{dismissed:function(e){t.dismissCountDown=0},"dismiss-count-down":t.countDownChanged}},[i("p",[t._v(t._s(t.mensaje.texto))]),i("b-progress",{attrs:{variant:t.mensaje.color,max:t.dismissSecs,value:t.dismissCountDown,height:"4px"}})],1)],1),i("b-collapse",{attrs:{id:"desplegable"}},t._l(t.citas,(function(e,s){return i("b-card",{key:s,staticClass:"mb-1 mx-5",attrs:{"no-body":""}},[i("b-card-header",{attrs:{"header-tag":"header",role:"tab"}},[i("div",{staticClass:"d-flex flex-wrap align-items-center justify-content-around"},[i("div",{staticClass:"boton",staticStyle:{"min-width":"90px"}},[i("p",[t._v("Fecha")]),i("p",[t._v(t._s(e.fechaCita.substring(0,10)))])]),i("div",{staticClass:"boton"},[i("p",[t._v("Autorizado")]),1==e.autorizado?i("p",[t._v("‚úÖ")]):i("p",[t._v("‚ùî")])]),i("div",{staticClass:"boton mx-3"},[i("p",[t._v("‚Ç¨")]),i("p",[t._v(t._s(e.precio))])]),i("div",{staticClass:"boton"},[i("p",[i("svg",{staticClass:"bi bi-three-dots",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[i("path",{attrs:{d:"M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"}})])]),i("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"accordionusu-"+s,expression:"'accordionusu-' + index"}]},[i("svg",{staticClass:"bi bi-info-circle-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[i("path",{attrs:{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"}})])])],1)])]),i("b-collapse",{attrs:{id:"accordionusu-"+s}},[i("b-card-body",[i("b-card-text",[i("div",{staticClass:"abajo d-flex flex-wrap"},[i("div",{staticClass:"boton"},[i("p",[t._v("Autor")]),i("button",{staticClass:"btn btn-success",on:{click:function(i){return t.perfil(e.tatuador)}}},[t._v(" üë®‚Äçüé® ")])]),i("div",{staticClass:"boton"},[i("p",[t._v("Cliente")]),i("button",{staticClass:"btn btn-success",on:{click:function(i){return t.perfil(e.cliente)}}},[t._v(" üôé‚Äç‚ôÇÔ∏è ")])]),i("div",{staticClass:"boton"},[i("p",[t._v("Tatuaje")]),i("button",{staticClass:"btn btn-primary",on:{click:function(i){return t.tatuajeE(e.tatuaje)}}},[t._v(" üé® ")])]),i("div",{staticClass:"boton"},[i("p",[t._v("Acciones")]),i("button",{staticClass:"btn btn-danger",attrs:{title:"delete"},on:{click:function(i){return t.showMsgBox(e._id)}}},[t._v(" üí• ")])])])])],1)],1)],1)})),1)],1)},n=[],r={name:"perfil",data(){return{box:"",cont:"",dismissSecs:5,dismissCountDown:0,showDismissibleAlert:!1,mensaje:{color:"",texto:""},usuario:{nombre:"",tatuador:Boolean,fechaNacimiento:"",fotoPerfil:"",usuario:"",password:"",aboutYou:""},src:"http://localhost:3000/",accion:!1,paginate:["citas"],citas:[],cita:{_id:"",tatuador:"",cliente:"",fechaCita:"",precio:"",autorizado:Boolean,tatuaje:""},idTem:""}},created(){var t;t=""==this.idTem?location.href.split("?id=")[1]:this.idTem,this.axios.get("usuarios/listar/"+t).then((e=>{"true"==localStorage.getItem("tatuador")||localStorage.getItem("id")==t?this.accion=!0:e.data.tatuador||localStorage.getItem("id")==t||this.$router.go(-1),this.usuario=e.data,this.usuario.fechaNacimiento=e.data.fechaNacimiento.substring(0,10)})).catch((t=>{console.log(t)})).finally((e=>{this.axios.get("citas/usuario/"+t).then((t=>{this.citas=t.data,this.citas.sort((function(t,e){return new Date(t.fechaCita).getTime()-new Date(e.fechaCita).getTime()}))})).catch((t=>{console.log(t)}))}))},methods:{alerta(){this.mensaje.color="danger",this.mensaje.texto="Cita cancelada ",this.showAlert()},alertaF(){this.mensaje.color="danger",this.mensaje.texto="No puede escribir m√°s de 200 caracteres ",this.showAlert()},actualizarUsuario(t){console.log(t.aboutYou.length),t.aboutYou.length<=200&&this.axios.put("usuarios/actualizar/"+t._id,t).then((t=>{this.usuario.aboutYou=t.data.aboutYou})).catch((t=>{console.log(t.response)}))},editarUsuario(t){window.location.href="/usuarios/editar?id="+t},eliminarUsuario(t){this.axios.delete("/usuarios/borrar/"+t).then((t=>{const e=this.usuarios.findIndex((e=>e._id===t.data._id));this.usuarios.splice(e,1),localStorage.clear(),this.mensaje.color="danger",this.mensaje.texto="Usuario eliminado con exito!",this.showAlert()}))},editAboutYou(){document.querySelector("input.edit").removeAttribute("hidden"),document.querySelector("input.edit").focus(),document.querySelector("button.ok").removeAttribute("hidden"),this.cont=document.querySelector("input.edit").value.length},hidden(){this.cont>200||(document.querySelector("input.edit").setAttribute("hidden",""),document.querySelector("button.ok").setAttribute("hidden",""))},perfil(t){window.location.href="/usuario?id="+t},tatuajeE(t){window.location.href="/tatuaje?id="+t},eliminarCita(t){this.citas.find((e=>e._id===t));this.axios.delete("/citas/borrar/"+t).then((t=>{const e=this.citas.findIndex((e=>e._id===t.data._id));this.citas.splice(e,1),this.alerta()}))},countDownChanged(t){this.dismissCountDown=t},showAlert(){this.dismissCountDown=this.dismissSecs},showMsgBox(t){this.boxTwo="",this.$bvModal.msgBoxConfirm("¬øQuieres eliminarlo?",{title:"Por favor, confirme",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"ELIMINAR",cancelTitle:"CANCELAR",footerClass:"p-2",hideHeaderClose:!1,backgroundColor:"success",centered:!0}).then((e=>{this.box=e,1==this.box&&this.eliminarCita(t)})).catch((t=>{console.log(t)}))},cuentaLetras(){this.cont=document.querySelector("input.edit").value.length,this.cont>200?(document.querySelector("button.ok").classList.remove("btn-outline-success"),document.querySelector("button.ok").classList.add("btn-danger")):document.querySelector("button.ok").classList.contains("btn-outline-success")||(document.querySelector("button.ok").classList.remove("btn-danger"),document.querySelector("button.ok").classList.add("btn-outline-success"))}}},c=r,u=i(1001),l=(0,u.Z)(c,o,n,!1,null,null,null),d=l.exports,m={name:"Usuario",components:{UserCard:d},data(){return{value:"",context:null}},created(){void 0!=location.href.split("?id=")[1]&&""!=location.href.split("?id=")[1]||this.$router.go(-1)},methods:{onContext(t){this.context=t}}},b=m,h=(0,u.Z)(b,s,a,!1,null,null,null),p=h.exports}}]);
//# sourceMappingURL=762.b6bcdfd8.js.map