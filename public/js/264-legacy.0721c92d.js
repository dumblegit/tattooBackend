"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[264],{5264:function(s,t,o){o.r(t),o.d(t,{default:function(){return c}});var a=function(){var s=this,t=s.$createElement,o=s._self._c||t;return o("div",{staticClass:"d-flex flex-column align-items-center"},[o("h1",{staticClass:"my-5"},[s._v("Iniciar sesi칩n")]),o("form",{staticClass:"d-flex flex-column",on:{submit:function(t){return t.preventDefault(),s.comprobarCrecenciales()}}},[o("div",{},[o("div",{staticClass:"px-5 py-3",attrs:{id:"form"}},[s._v(" Usuario "),o("input",{directives:[{name:"model",rawName:"v-model",value:s.usuario.usuario,expression:"usuario.usuario"}],staticClass:"form-control my-2",attrs:{type:"text",placeholder:"Usuario",required:""},domProps:{value:s.usuario.usuario},on:{input:function(t){t.target.composing||s.$set(s.usuario,"usuario",t.target.value)}}}),s._v(" Contrase침a "),o("input",{directives:[{name:"model",rawName:"v-model",value:s.usuario.password,expression:"usuario.password"}],staticClass:"form-control my-2",attrs:{type:"password",placeholder:"Contrase침a",required:""},domProps:{value:s.usuario.password},on:{input:function(t){t.target.composing||s.$set(s.usuario,"password",t.target.value)}}})]),o("b-button",{staticClass:"my-4 w-100",attrs:{id:"enviar",pill:"",type:"submit"}},[s._v(" Iniciar ")])],1)]),o("div",{staticClass:"container"},[o("b-alert",{attrs:{show:s.dismissCountDown,variant:s.mensaje.color},on:{dismissed:function(t){s.dismissCountDown=0},"dismiss-count-down":s.countDownChanged}},[o("p",[s._v(s._s(s.mensaje.texto))]),o("b-progress",{attrs:{variant:s.mensaje.color,max:s.dismissSecs,value:s.dismissCountDown,height:"4px"}})],1)],1)])},e=[],i=(o(2851),{data:function(){return{dismissSecs:5,dismissCountDown:0,showDismissibleAlert:!1,mensaje:{color:"",texto:""},usuario:{usuario:"",password:""}}},created:function(){null!=localStorage.getItem("id")&&this.$router.go(-1)},methods:{alertaUsuario:function(){this.mensaje.color="warning",this.mensaje.texto="El usuario introducido no existe",this.showAlert()},alertaPass:function(){this.mensaje.color="warning",this.mensaje.texto="La contrase침a y usuario son incorrectos",this.showAlert()},comprobarCrecenciales:function(){var s=this;this.axios.post("/usuarios/comprobarUsuario",this.usuario).then((function(t){t.data.existe?s.axios.post("/usuarios/inicioSesion",s.usuario).then((function(t){t.data.inicioFallido?s.alertaPass():(localStorage.setItem("id",t.data.id),localStorage.setItem("nombre",t.data.nombre),localStorage.setItem("usuario",t.data.usuario),localStorage.setItem("tatuador",t.data.tatuador),location.reload())})).catch((function(s){console.log(s)})):s.alertaUsuario()})).catch((function(s){console.log(s)}))},countDownChanged:function(s){var t=this;this.dismissCountDown=s,"success"==this.mensaje.color&&setTimeout((function(){t.$router.go(-1)}),500)},showAlert:function(){this.dismissCountDown=this.dismissSecs}},mounted:function(){document.querySelector("#form > input:nth-child(1)").focus()}}),n=i,r=o(1001),u=(0,r.Z)(n,a,e,!1,null,null,null),c=u.exports}}]);
//# sourceMappingURL=264-legacy.0721c92d.js.map