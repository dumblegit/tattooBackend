"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[258],{4258:function(t,e,a){a.r(e),a.d(e,{default:function(){return l}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex flex-column align-items-center"},[a("br"),a("h1",{staticClass:"my-5"},[t._v("Sube un nuevo Tatuaje")]),a("form",{staticClass:"d-flex flex-column align-items-center",attrs:{enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),t.agregarTatuaje()}}},[a("div",{staticClass:"px-5 pb-3 m-0",attrs:{id:"form"}},[a("h3",{staticClass:"mt-3"},[t._v("Nuevo tatuaje")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tatuaje.nombre,expression:"tatuaje.nombre"}],staticClass:"form-control my-2",attrs:{type:"text",placeholder:"Nombre",required:""},domProps:{value:t.tatuaje.nombre},on:{input:function(e){e.target.composing||t.$set(t.tatuaje,"nombre",e.target.value)}}}),a("div",{staticClass:"d-flex justify-content-center mt-3"},[a("p",[t._v("Tipo de tatuaje")]),a("div",{staticClass:"form-check mx-5"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tatuaje.tatuado,expression:"tatuaje.tatuado"}],staticClass:"form-check-input",attrs:{type:"radio",name:"flexRadioDefault",id:"noTatuado",value:"true",required:""},domProps:{checked:t._q(t.tatuaje.tatuado,"true")},on:{change:function(e){return t.$set(t.tatuaje,"tatuado","true")}}}),a("label",{staticClass:"form-check-label",attrs:{for:"noTatuado"}},[t._v("No tatuado")])]),a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tatuaje.tatuado,expression:"tatuaje.tatuado"}],staticClass:"form-check-input",attrs:{type:"radio",name:"flexRadioDefault",id:"siTatuado",value:"false",required:""},domProps:{checked:t._q(t.tatuaje.tatuado,"false")},on:{change:function(e){return t.$set(t.tatuaje,"tatuado","false")}}}),a("label",{staticClass:"form-check-label",attrs:{for:"siTatuado"}},[t._v(" Ya tatuado ")])])]),a("div",{staticClass:"form-group m-2"},[a("label",{attrs:{for:"selectAutores"}},[t._v("Autores")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tatuaje.autor,expression:"tatuaje.autor"}],staticClass:"form-control",attrs:{id:"selectAutores"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.tatuaje,"autor",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Desconocido")]),t._l(t.autores,(function(e){return a("option",{key:e.id,domProps:{value:e._id}},[t._v(" "+t._s(e.nombre)+" ")])}))],2)]),a("div",{staticClass:"d-flex align-items-center"},[t._v(" Foto de diseÃ±o "),a("input",{staticClass:"form-control m-2",attrs:{id:"imagenes",type:"file",required:""},on:{change:t.agregarFile}})]),t._v(" Precio "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tatuaje.precio,expression:"tatuaje.precio"}],staticClass:"form-control my-2",attrs:{type:"number",placeholder:"Precio",required:""},domProps:{value:t.tatuaje.precio},on:{input:function(e){e.target.composing||t.$set(t.tatuaje,"precio",e.target.value)}}}),t._v(" DescripciÃ³n "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tatuaje.aboutTattoo,expression:"tatuaje.aboutTattoo"}],staticClass:"form-control my-2",attrs:{placeholder:"DescripciÃ³n"},domProps:{value:t.tatuaje.aboutTattoo},on:{input:function(e){e.target.composing||t.$set(t.tatuaje,"aboutTattoo",e.target.value)}}})]),a("b-button",{staticClass:"my-4",attrs:{id:"enviar",pill:"",type:"submit"}},[t._v("Enviar")])],1),a("div",{staticClass:"container"},[a("b-alert",{attrs:{show:t.dismissCountDown,variant:t.mensaje.color},on:{dismissed:function(e){t.dismissCountDown=0},"dismiss-count-down":t.countDownChanged}},[a("p",[t._v(t._s(t.mensaje.texto))]),a("b-progress",{attrs:{variant:t.mensaje.color,max:t.dismissSecs,value:t.dismissCountDown,height:"4px"}})],1)],1)])},o=[],r={data(){return{tatuajes:[],dismissSecs:5,dismissCountDown:0,showDismissibleAlert:!1,mensaje:{color:"",texto:""},tatuaje:{nombre:"",tatuado:Boolean,autor:"",imagenes:Array(),imagen:null,precio:0,aboutTattoo:""},autores:[],selected:"",idTem:""}},beforeCreate(){"true"!=localStorage.getItem("tatuador")&&this.$router.go(-1)},created(){this.axios.get("/usuarios/tatuadores").then((t=>{this.autores=t.data})).catch((t=>{console.log(t)}))},alertaArchivoNulo(){this.mensaje.color="warning",this.mensaje.texto="La foto debe ser en formato .jpg .png o .jpeg",this.showAlert()},methods:{alertaTrue(){this.mensaje.color="success",this.mensaje.texto="Tatuaje agregado con exito! ðŸ‘Œ",this.showAlert()},alertaFalse(){this.mensaje.color="warning",this.mensaje.texto="Error :(",this.showAlert()},agregarTatuaje(){const t=new FormData;t.append("imagen",this.tatuaje.imagen),this.axios.post("/tatuajes/agregarFoto",t).then((t=>{this.tatuaje.imagenes[0]=t.data,this.alertaTrue()})).catch((t=>{console.log(t),this.alertaFalse()})).finally((t=>{this.axios.post("/tatuajes/agregar",this.tatuaje).then((t=>{this.tatuajes.push(t.data),this.idTem=t.data._id,this.alertaTrue()})).catch((t=>{console.log(t.response),this.alertaFalse()})).finally((t=>{this.tatuaje.nombre="",this.tatuaje.tatuado=!1,this.tatuaje.autor="",this.tatuaje.precio="",this.tatuaje.aboutTattoo=""}))}))},agregarFile(t){var e=t.target.files[0];const a=["image/jpg","image/jpeg","image/png"];a.includes(e.type)?this.tatuaje.imagen=e:(this.alertaArchivoNulo(),t.target.value="")},countDownChanged(t){this.dismissCountDown=t,"success"==this.mensaje.color&&setTimeout((()=>{window.location.href="/editar?id="+this.idTem}),5e3)},showAlert(){this.dismissCountDown=this.dismissSecs}}},i=r,n=a(1001),u=(0,n.Z)(i,s,o,!1,null,null,null),l=u.exports}}]);
//# sourceMappingURL=258.c692048a.js.map