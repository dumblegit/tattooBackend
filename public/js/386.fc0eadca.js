"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[386],{9386:function(t,s,e){e.r(s),e.d(s,{default:function(){return l}});var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("br"),t._m(0),e("div",{staticClass:"d-flex flex-row flex-wrap justify-content-center"},[e("div",{staticClass:"sinFondo",attrs:{id:"for"}},[e("form",{staticClass:"form-inline my-2 my-lg-0 d-flex",on:{submit:function(s){return s.preventDefault(),t.buscarUsuario()}}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.busqueda,expression:"busqueda"}],staticClass:"form-control m-1",attrs:{id:"usr-input",type:"search",placeholder:"Buscar","aria-label":"busqueda"},domProps:{value:t.busqueda},on:{input:function(s){s.target.composing||(t.busqueda=s.target.value)}}}),e("button",{staticClass:"btn btn-outline-success m-1",attrs:{type:"submit"}},[t._v(" Buscar ")])]),e("button",{staticClass:"btn btn-outline-success m-1",attrs:{id:"micro"},on:{click:function(s){return t.play()}}},[e("svg",{staticClass:"bi bi-mic-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[e("path",{attrs:{d:"M13 8c0 .564-.094 1.107-.266 1.613l-.814-.814A4.02 4.02 0 0 0 12 8V7a.5.5 0 0 1 1 0v1zm-5 4c.818 0 1.578-.245 2.212-.667l.718.719a4.973 4.973 0 0 1-2.43.923V15h3a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1h3v-2.025A5 5 0 0 1 3 8V7a.5.5 0 0 1 1 0v1a4 4 0 0 0 4 4zm3-9v4.879L5.158 2.037A3.001 3.001 0 0 1 11 3z"}}),e("path",{attrs:{d:"M9.486 10.607 5 6.12V8a3 3 0 0 0 4.486 2.607zm-7.84-9.253 12 12 .708-.708-12-12-.708.708z"}})])])]),e("div",{staticClass:"d-flex flex-wrap align-items-center justify-content-center m-2",attrs:{id:"select"}},[e("div",{staticClass:"d-flex align-items-center m-2"},[e("label",{staticClass:"m-2",attrs:{for:"filtro1"}},[t._v(" Orden ")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.orden1,expression:"orden1"}],staticClass:"form-control usr-input",attrs:{name:"filtro1",id:"filtro1"},on:{change:[function(s){var e=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var s="_value"in t?t._value:t.value;return s}));t.orden1=s.target.multiple?e:e[0]},function(s){return t.cambiarEnlace()}]}},[e("option",{attrs:{value:"nin"}},[t._v("Ninguna")]),e("option",{attrs:{value:"alfb"}},[t._v("Alfabéticamente")]),e("option",{attrs:{value:"reves"}},[t._v("Revés")])])]),e("div",{staticClass:"d-flex align-items-center m-2"},[e("label",{staticClass:"m-2",attrs:{for:"filtro2"}},[t._v(" Filtrar ")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.orden2,expression:"orden2"}],staticClass:"form-control usr-input",attrs:{name:"filtro2",id:"filtro2"},on:{change:[function(s){var e=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var s="_value"in t?t._value:t.value;return s}));t.orden2=s.target.multiple?e:e[0]},function(s){return t.cambiarEnlace()}]}},[e("option",{attrs:{value:"to"}},[t._v("Todos")]),e("option",{attrs:{value:"ta"}},[t._v("Tatuadores")]),e("option",{attrs:{value:"cl"}},[t._v("Clientes")])])])])]),e("b-button",{staticClass:"m-2",attrs:{pill:"",variant:"success",size:"lg",block:""},on:{click:function(s){return t.agregarUsuario()}}},[t._v(" Añadir usuario ")]),t.usuarios.length>0?e("div",[e("paginate",{ref:"paginator",attrs:{name:"usuarios",list:t.usuarios,per:10}},[e("table",{staticClass:"table table-striped container mb-5"},[e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("Perfil")]),e("th",{attrs:{scope:"col"}},[t._v("Nombre")]),e("th",{attrs:{scope:"col"}},[t._v("Nick")]),e("th",{attrs:{scope:"col"}},[t._v("Accion")])])]),e("tbody",t._l(t.paginated("usuarios"),(function(s,i){return e("tr",{key:i},[e("td",[e("div",{staticClass:"imagen"},[e("img",{staticClass:"rounded-circle",attrs:{src:t.src+s.fotoPerfil,alt:"fotoPerfil"},on:{click:function(e){return t.perfil(s._id)}}})])]),e("td",[t._v(t._s(s.nombre))]),e("td",[t._v(t._s(s.usuario))]),e("td",[e("b-dropdown",{staticClass:"m-2",attrs:{text:"🛠",variant:"warning"}},[e("b-dropdown-item",[e("p",{attrs:{title:"edit"},on:{click:function(e){return t.editarUsuario(s._id)}}},[t._v(" 🛠 User Settings ")])]),e("b-dropdown-item",[e("p",{attrs:{title:"delete"},on:{click:function(e){return t.showMsgBox(s._id)}}},[t._v(" 💥 Delete User ")])])],1)],1)])})),0)])])],1):e("div",[e("h2",[t._v("No se han encontrado resultados")])]),e("div",{staticClass:"container"},[e("b-alert",{attrs:{show:t.dismissCountDown,variant:t.mensaje.color},on:{dismissed:function(s){t.dismissCountDown=0},"dismiss-count-down":t.countDownChanged}},[e("p",[t._v(t._s(t.mensaje.texto))]),e("b-progress",{attrs:{variant:t.mensaje.color,max:t.dismissSecs,value:t.dismissCountDown,height:"4px"}})],1)],1),t.usuarios.length>10?e("paginate-links",{attrs:{for:"usuarios","show-step-links":!0,simple:{prev:"◀",next:"▶"}}}):t._e()],1)},o=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("h1",{staticClass:"my-5"},[e("span",[e("h3",[t._v("🙋‍♂️ 🙋‍♀️")])]),t._v(" Usuarios ")])}],r={data(){return{src:"http://localhost:3000/",box:"",paginate:["usuarios"],usuarios:[],dismissSecs:5,dismissCountDown:0,showDismissibleAlert:!1,mensaje:{color:"",texto:""},usuario:{nombre:"",tatuador:Boolean,fechaNacimiento:"",fotoPerfil:"",usuario:"",password:"",aboutYou:"",orden:"",orden1:"",orden2:"",busqueda:""}}},created(){if("true"!=localStorage.getItem("tatuador"))this.$router.go(-1);else if(void 0==window.location.href.split("?or=")[1]&&void 0==window.location.href.split("se=")[1])window.location.href="/usuarios?or=ninto";else{var t=window.location.href.split("?or=")[1];void 0==t&&(this.busqueda=window.location.href.split("?se=")[1]),void 0!=t&&(this.orden=t.split("&se=")[0],this.orden1=this.orden.substring(0,this.orden.length-2),this.orden2=this.orden.substring(this.orden.length-2,this.orden.length),this.busqueda=window.location.href.split("se=")[1]),void 0==this.busqueda&&(this.busqueda=""),"ta"==this.orden2?this.listarUsuarios("/usuarios/tatuadores"):"cl"==this.orden2?this.listarUsuarios("/usuarios/clientes"):this.listarUsuarios("/usuarios/listar")}},mounted(){this.insertarOpciones(this.orden)},methods:{alerta(){this.mensaje.color="warning",this.mensaje.texto="Usuario eliminado 💥 ",this.showAlert()},agregarUsuario(){window.location.href="/agregarUsuario"},insertarOpciones(t){document.getElementById("filtro1").value=t.substring(0,t.length-2),document.getElementById("filtro2").value=t.substring(t.length-2,t.length)},buscarUsuario(){""!=this.orden||""!=this.busqueda&&void 0!=this.busqueda?""==this.orden?window.location.href="?se="+this.busqueda:""==this.orden||""!=this.busqueda&&void 0!=this.busqueda?window.location.href="?or="+this.orden+"&se="+this.busqueda:window.location.href="?or="+this.orden:window.location.href="/"},cambiarEnlace(){var t=this.orden1+this.orden2;""==t&&""!=this.busqueda?window.location.href="?se="+this.busqueda:""==t&&""==this.busqueda?window.location.href="/":""!=t&&""!=this.busqueda?window.location.href="?or="+t+"&se="+this.busqueda:window.location.href="?or="+t},listarUsuarios(t){this.axios.get(t).then((t=>{var s=t.data;if(null==this.busqueda||""==this.busqueda)"alfb"==this.orden1?(this.ordenarNombre(s),this.usuarios=s):"reves"==this.orden1?(this.ordenarNombre(s),s.reverse(),this.usuarios=s):this.usuarios=s;else{for(var e=s.length-1;e>=0;e--)-1==s[e].nombre.toLowerCase().indexOf(this.busqueda.toLowerCase())&&s.splice(e,1);"alfb"==this.orden1?(this.ordenarNombre(s),this.usuarios=s):"reves"==this.orden1?(this.ordenarNombre(s),s.reverse(),this.usuarios=s):this.usuarios=s}})).catch((t=>{console.log(t.response)}))},ordenarNombre(t){t.sort((function(t,s){var e=t.nombre.toUpperCase(),i=s.nombre.toUpperCase();return e<i?-1:e>i?1:0}))},editarUsuario(t){window.location.href="/usuarios/editar?id="+t},eliminarUsuario(t){const s=this.usuarios.find((s=>s._id===t));this.axios.put("usuarios/eliminarFoto/"+t,s).then((s=>{this.axios.delete("/usuarios/borrar/"+t).then((t=>{const s=this.usuarios.findIndex((s=>s._id===t.data._id));this.usuarios.splice(s,1),this.alerta()})).catch((t=>{console.log(t)}))}))},perfil(t){window.location.href="/usuario?id="+t},countDownChanged(t){this.dismissCountDown=t},showAlert(){this.dismissCountDown=this.dismissSecs},showMsgBox(t){this.boxTwo="",this.$bvModal.msgBoxConfirm("¿Quieres eliminarlo?",{title:"Por favor, confirme",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"ELIMINAR",cancelTitle:"CANCELAR",footerClass:"p-2",hideHeaderClose:!1,backgroundColor:"success",centered:!0}).then((s=>{this.box=s,1==this.box&&this.eliminarUsuario(t)})).catch((t=>{console.log(t)}))},play(){document.querySelector("input#usr-input").focus();var t=document.getElementById("micro"),s=this.microAbierto(),e=this.microCerrado();const i=webkitSpeechRecognition,o=new i;var r="";o.start(),o.onstart=function(){document.querySelector("input#usr-input").value="Escuchando...",t.innerHTML=s},o.onspeechend=function(){t.innerHTML=e,o.stop()},o.onerror=function(t){document.querySelector("input#usr-input").value=""},o.onresult=function(t){var s=t.results[0][0].transcript;r=`${s}`,document.querySelector("input#usr-input").value=r,document.querySelector("input#usr-input").nextElementSibling.focus()};for(var a=0;a<10;a++)setTimeout((()=>{this.busqueda=r}),500*a)},microAbierto(){return'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-mic" viewBox="0 0 16 16"><path d="M3.5 6.5A.5.5 0 0 1 4 7v1a4 4 0 0 0 8 0V7a.5.5 0 0 1 1 0v1a5 5 0 0 1-4.5 4.975V15h3a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1h3v-2.025A5 5 0 0 1 3 8V7a.5.5 0 0 1 .5-.5z"/><path d="M10 8a2 2 0 1 1-4 0V3a2 2 0 1 1 4 0v5zM8 0a3 3 0 0 0-3 3v5a3 3 0 0 0 6 0V3a3 3 0 0 0-3-3z"/></svg>'},microCerrado(){return'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-mic-fill" viewBox="0 0 16 16"><path d="M13 8c0 .564-.094 1.107-.266 1.613l-.814-.814A4.02 4.02 0 0 0 12 8V7a.5.5 0 0 1 1 0v1zm-5 4c.818 0 1.578-.245 2.212-.667l.718.719a4.973 4.973 0 0 1-2.43.923V15h3a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1h3v-2.025A5 5 0 0 1 3 8V7a.5.5 0 0 1 1 0v1a4 4 0 0 0 4 4zm3-9v4.879L5.158 2.037A3.001 3.001 0 0 1 11 3z"/><path d="M9.486 10.607 5 6.12V8a3 3 0 0 0 4.486 2.607zm-7.84-9.253 12 12 .708-.708-12-12-.708.708z"/></svg>'}}},a=r,n=e(1001),u=(0,n.Z)(a,i,o,!1,null,null,null),l=u.exports}}]);
//# sourceMappingURL=386.fc0eadca.js.map