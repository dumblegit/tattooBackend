"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[279],{9279:function(a,t,e){e.r(t),e.d(t,{default:function(){return l}});var s=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"d-flex flex-column align-items-center"},[e("br"),e("h1",{staticClass:"my-5"},[a._v("Te damos la Bienvenida ðŸ‘‹")]),e("form",{staticClass:"d-flex flex-column",attrs:{enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),a.agregarUsuario()}}},[e("div",{staticClass:"container px-5 pb-3",attrs:{id:"form"}},[e("h3",{staticClass:"mt-3"},[a._v("Nuevo usuario")]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.usuario.nombre,expression:"usuario.nombre"}],staticClass:"form-control my-2",attrs:{type:"text",placeholder:"Nombre",required:""},domProps:{value:a.usuario.nombre},on:{input:function(t){t.target.composing||a.$set(a.usuario,"nombre",t.target.value)}}}),e("div",{staticClass:"d-flex"},[e("label",{attrs:{for:"date"}},[a._v("Fecha de nacimiento:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.usuario.fechaNacimiento,expression:"usuario.fechaNacimiento"}],staticClass:"form-control my-2",attrs:{type:"date",id:"date",required:""},domProps:{value:a.usuario.fechaNacimiento},on:{input:function(t){t.target.composing||a.$set(a.usuario,"fechaNacimiento",t.target.value)}}})]),e("div",{staticClass:"d-flex align-items-center"},[a._v(" Foto de perfil: "),e("input",{staticClass:"form-control m-2",attrs:{id:"fotoPerfil",type:"file"},on:{change:a.agregarFile}})]),e("div",{staticClass:"input-group mb-2"},[a._m(0),e("input",{directives:[{name:"model",rawName:"v-model",value:a.usuario.usuario,expression:"usuario.usuario"}],staticClass:"form-control my-2",attrs:{type:"text",id:"inlineFormInputGroup",placeholder:"Username",required:""},domProps:{value:a.usuario.usuario},on:{input:function(t){t.target.composing||a.$set(a.usuario,"usuario",t.target.value)}}})]),e("div",[e("b-form",{on:{submit:function(a){a.stopPropagation(),a.preventDefault()}}},[e("b-form-input",{attrs:{type:"password",placeholder:"ContraseÃ±a",state:a.validation,id:"feedback-user"},model:{value:a.usuario.password,callback:function(t){a.$set(a.usuario,"password",t)},expression:"usuario.password"}}),e("b-form-invalid-feedback",{attrs:{state:a.validation}},[a._v(" Debe tener entre 8 y 16 caracteres, al menos un dÃ­gito, al menos una minÃºscula y al menos una mayÃºscula. ")]),e("b-form-valid-feedback",{attrs:{state:a.validation}},[a._v(" ok. ")])],1)],1)]),e("b-button",{staticClass:"my-4",attrs:{id:"enviar",pill:"",type:"submit"}},[a._v("Enviar")])],1),e("div",{staticClass:"container"},[e("b-alert",{attrs:{show:a.dismissCountDown,variant:a.mensaje.color},on:{dismissed:function(t){a.dismissCountDown=0},"dismiss-count-down":a.countDownChanged}},[e("p",[a._v(a._s(a.mensaje.texto))]),e("b-progress",{attrs:{variant:a.mensaje.color,max:a.dismissSecs,value:a.dismissCountDown,height:"4px"}})],1)],1)])},o=[function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("div",{staticClass:"input-group-text my-2"},[a._v("@")])])}],i=(e(4916),e(7601),e(1539),e(6699),{data:function(){return{usuarios:[],dismissSecs:5,dismissCountDown:0,showDismissibleAlert:!1,mensaje:{color:"",texto:""},usuario:{nombre:"",tatuador:Boolean,fechaNacimiento:null,fotoPerfil:"",usuario:"",password:"",aboutYou:""},valida:""}},beforeCreate:function(){null!=localStorage.getItem("id")&&this.$router.go(-1)},computed:{validation:function(){var a=/^(?=\w*\d)(?=\w*[A-Z])(?=\w*[a-z])\S{8,16}$/;return a.test(this.usuario.password)?this.valida=!0:this.valida=!1,a.test(this.usuario.password)}},methods:{alertaTrue:function(){this.mensaje.color="success",this.mensaje.texto="Usuario agregado con exito! ðŸ‘Œ",this.showAlert()},alertaFalse:function(){this.mensaje.color="warning",this.mensaje.texto="Error :(",this.showAlert()},alertaUsuarioExistente:function(){alert("Nombre de usuario ya existente")},agregarUsuario:function(){var a=this;this.axios.post("/usuarios/comprobarUsuario",this.usuario).then((function(t){if(0==t.data.existe)if(1==a.valida){var e=new FormData;e.append("fotoPerfil",a.usuario.fotoPerfil),a.axios.post("/usuarios/agregarFoto",e).then((function(t){a.usuarios.push(t.data),a.usuario.fotoPerfil=t.data,a.alertaTrue()})).catch((function(t){a.alertaFalse()})).finally((function(t){a.axios.post("/usuarios/agregar",a.usuario).then((function(t){a.usuarios.push(t.data),a.alertaTrue()})).catch((function(t){a.alertaFalse()})).finally((function(t){a.usuario.nombre="",a.usuario.tatuador=!1,a.usuario.fotoPerfil="",a.usuario.fechaNacimiento=new Date,a.usuario.usuario="",a.usuario.password=""}))}))}else a.alertaFalse;else a.alertaUsuarioExistente()}))},agregarFile:function(a){var t=a.target.files[0],e=["image/jpg","image/jpeg","image/png"];e.includes(t.type)&&(this.usuario.fotoPerfil=t)},countDownChanged:function(a){this.dismissCountDown=a,"success"==this.mensaje.color&&setTimeout((function(){window.location.href="/"}),5e3)},showAlert:function(){this.dismissCountDown=this.dismissSecs}}}),r=i,n=e(1001),u=(0,n.Z)(r,s,o,!1,null,null,null),l=u.exports}}]);
//# sourceMappingURL=279-legacy.7413c095.js.map